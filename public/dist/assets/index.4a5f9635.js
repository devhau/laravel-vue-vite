import{M as x}from"./index.bdc8142a.js";import{b as M,a as C,_ as U,p as _}from"./main.4070e8ce.js";import{r as l,o as c,e as h,w as i,b as d,g,t as b,s as w,a}from"./vendor.0fa58858.js";const R=M("role"),E=(e,o)=>C.get(`role/permission/${e}/${o}`),y=(e,o)=>C.put(`role/permission/${e}`,o);var k={...R,getPermission:E,putPermission:y};const N={props:{show:{type:Boolean,default:!1},modelValue:{}},methods:{onCloseForm(){this.$emit("update:show",!1)},onUpdateData(){var e;k.putPermission((e=this.modelValue)==null?void 0:e.id,{permissions:this.permissions}).then(()=>{this.onCloseForm()})}},computed:{source(){return Object.keys(this.modules).map(e=>{let o=this.modules[e].map(t=>({text:t.title,value:t.name}));return{text:e,sub:o}})}},data(){return{modules:null,permissions:[]}},mounted(){var e;k.getPermission((e=this.modelValue)==null?void 0:e.id,"web").then(({data:o})=>{let{modules:t,permissions:f}=o.data;this.modules=t,this.permissions=f})},setup(){}};function O(e,o,t,f,n,m){const V=l("vh-group-checkbox"),r=l("vh-button"),v=l("vh-modal");return c(),h(v,{title:this.modelValue.name,show:t.show,onHide:m.onCloseForm},{footer:i(({})=>[d(r,{size:"sm",color:"warning",beforeIcon:"bi bi-x",onClick:m.onCloseForm},{default:i(()=>[g(b(e.$t("common.manager.button.cancel")),1)]),_:1},8,["onClick"]),d(r,{size:"sm",beforeIcon:"bi bi-pencil-square",onClick:o[1]||(o[1]=u=>m.onUpdateData())},{default:i(()=>[g(b(e.$t("common.manager.button.update")),1)]),_:1})]),default:i(()=>[n.modules?(c(),h(V,{key:0,style:{"max-height":"500px"},modelValue:n.permissions,"onUpdate:modelValue":o[0]||(o[0]=u=>n.permissions=u),source:m.source,itemDisabled:u=>this.modelValue.name==="supper-admin"},null,8,["modelValue","source","itemDisabled"])):w("",!0)]),_:1},8,["title","show","onHide"])}var B=U(N,[["render",O]]);const I={components:{Manager:x,Permission:B},methods:{SetPermission(e){this.DataRow=e,this.showModalPermission=!0}},data(){return{showModalPermission:!1,DataRow:{},option:{checkButtonDelete:({row:e,index:o,start:t})=>e.name!="supper-admin",checkButtonUpdate:({row:e,index:o,start:t})=>e.name!="supper-admin",api:{...k},can:{new:_.ROLE.NEW,edit:_.ROLE.EDIT,remove:_.ROLE.REMOVE,permission:_.ROLE.PERMISSION},columns:[{title:"#",isSort:!1,isFilter:!1,dataCell:(e,o,t)=>o+t},{title:"name",field:"name"},{title:"title",field:"title"},{title:"guard",field:"guard_name"}]}}},setup(){}},S={class:"mb-3"},$=a("label",{for:"idName",class:"form-label"},"M\xE3 vai tr\xF2",-1),F={class:"mb-3"},j=a("label",{for:"idtitle",class:"form-label"},"T\xEAn quy\u1EC1n",-1),L={class:"mb-3"},T=a("label",{for:"idguard_name",class:"form-label"},"T\xEAn guard",-1);function z(e,o,t,f,n,m){const V=l("vh-button"),r=l("vh-input"),v=l("manager"),u=l("Permission"),D=l("vh-page");return c(),h(D,null,{default:i(()=>[a("h3",null,b(e.$t("module.role.title")),1),d(v,{option:n.option},{action_after:i(({row:s})=>[e.$can(n.option.can.permission)&&s.name!="supper-admin"?(c(),h(V,{key:0,beforeIcon:"bi bi-shield",color:"warning",size:"sm",onClick:P=>m.SetPermission(s)},{default:i(()=>[g(b(e.$t("module.role.button.permission")),1)]),_:2},1032,["onClick"])):w("",!0)]),form_update:i(({data:s,isNew:P})=>[a("div",S,[$,d(r,{id:"idName",disabled:!P,modelValue:s.name,"onUpdate:modelValue":p=>s.name=p,placeholder:"name"},null,8,["disabled","modelValue","onUpdate:modelValue"])]),a("div",F,[j,d(r,{id:"idtitle",modelValue:s.title,"onUpdate:modelValue":p=>s.title=p,placeholder:"title"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",L,[T,d(r,{id:"idguard_name",modelValue:s.guard_name,"onUpdate:modelValue":p=>s.guard_name=p,placeholder:"guard_name"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["option"]),n.showModalPermission?(c(),h(u,{key:0,show:n.showModalPermission,"onUpdate:show":o[0]||(o[0]=s=>n.showModalPermission=s),modelValue:n.DataRow,"onUpdate:modelValue":o[1]||(o[1]=s=>n.DataRow=s)},null,8,["show","modelValue"])):w("",!0)]),_:1})}var W=U(I,[["render",z]]);export{W as default};
