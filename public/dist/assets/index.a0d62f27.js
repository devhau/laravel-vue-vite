import{M as U}from"./index.1d074a31.js";import{b as D,a as b,_ as x}from"./main.4e0ba31f.js";import{r as n,o as d,e as c,w as t,b as i,g as k,t as P,q as v,a as m,c as y}from"./vendor.a9db33d4.js";const M=D("user"),R=(e,o)=>b.get(`user/permission/${e}/${o}`),N=(e,o)=>b.put(`user/permission/${e}`,o),B=()=>b.post("user/checkin"),E=()=>b.post("user/checkout");var C={...M,getPermission:R,putPermission:N,userCheckin:B,userCheckout:E};const F={props:{show:{type:Boolean,default:!1},modelValue:{}},methods:{onCloseForm(){this.$emit("update:show",!1)},onUpdateData(){var e;C.putPermission((e=this.modelValue)==null?void 0:e.id,{permissions:this.permissions,roles:this.roles}).then(()=>{this.onCloseForm()})}},computed:{sourceRole(){return[{text:"All Role",sub:this.allroles.map(e=>({text:e.title,value:e.name}))}]},source(){return Object.keys(this.modules).map(e=>{let o=this.modules[e].map(a=>({text:a.title,value:a.name}));return{text:e,sub:o}})}},data(){return{modules:null,permissions:[],roles:[],allroles:[]}},mounted(){var e;C.getPermission((e=this.modelValue)==null?void 0:e.id,"web").then(({data:o})=>{let{modules:a,permissions:V,roles:l,allroles:r}=o.data;this.modules=a,this.permissions=V,this.roles=l,this.allroles=r})},setup(){}},j=m("h4",null,"Permission",-1);function z(e,o,a,V,l,r){const h=n("vh-group-checkbox"),u=n("vh-col"),w=n("vh-row"),_=n("vh-button"),g=n("vh-modal");return d(),c(g,{size:"lg",title:this.modelValue.name,show:a.show,onHide:r.onCloseForm},{footer:t(({})=>[i(_,{size:"sm",color:"warning",beforeIcon:"bi bi-x",onClick:r.onCloseForm},{default:t(()=>[k(P(e.$t("common.manager.button.cancel")),1)]),_:1},8,["onClick"]),i(_,{size:"sm",beforeIcon:"bi bi-pencil-square",onClick:o[2]||(o[2]=s=>r.onUpdateData())},{default:t(()=>[k(P(e.$t("common.manager.button.update")),1)]),_:1})]),default:t(()=>[i(w,null,{default:t(()=>[i(u,null,{default:t(()=>[i(h,{style:{"max-height":"500px"},modelValue:l.roles,"onUpdate:modelValue":o[0]||(o[0]=s=>l.roles=s),source:r.sourceRole,itemDisabled:(s,f)=>f!==void 0},null,8,["modelValue","source","itemDisabled"])]),_:1}),i(u,null,{default:t(()=>[j,l.modules?(d(),c(h,{key:0,style:{"max-height":"500px"},modelValue:l.permissions,"onUpdate:modelValue":o[1]||(o[1]=s=>l.permissions=s),source:r.source,itemDisabled:s=>this.modelValue.name==="supper-admin"},null,8,["modelValue","source","itemDisabled"])):v("",!0)]),_:1})]),_:1})]),_:1},8,["title","show","onHide"])}var H=x(F,[["render",z]]);const S={components:{Manager:U,Permission:H},methods:{SetPermission(e){this.DataRow=e,this.showModalPermission=!0}},data(){return{showModalPermission:!1,DataRow:{},option:{api:{...C},columns:[{title:"#",isSort:!1,isFilter:!1,dataCell:(e,o,a)=>o+a},{title:"H\u1ECD t\xEAn",field:"name"},{title:"Email",field:"email"}]}}},setup(){}},A=m("h3",null,"Th\xF4ng tin nh\xE2n vi\xEAn",-1),I={class:"mb-3"},$=m("label",{for:"idName",class:"form-label"},"H\u1ECD t\xEAn",-1),q={class:"mb-3"},T=m("label",{for:"idEmail",class:"form-label"},"Email",-1),O={key:0,class:"mb-3"},G=m("label",{for:"idPassword",class:"form-label"},"M\u1EADt kh\u1EA9u",-1);function J(e,o,a,V,l,r){const h=n("vh-button"),u=n("vh-input"),w=n("manager"),_=n("Permission"),g=n("vh-page");return d(),c(g,null,{default:t(()=>[A,i(w,{option:l.option},{action_after:t(({row:s})=>[s.name!="supper-admin"?(d(),c(h,{key:0,beforeIcon:"bi bi-shield",color:"warning",size:"sm",onClick:f=>r.SetPermission(s)},{default:t(()=>[k(P(e.$t("module.role.button.permission")),1)]),_:2},1032,["onClick"])):v("",!0)]),form_update:t(({data:s,isNew:f})=>[m("div",I,[$,i(u,{id:"idName",modelValue:s.name,"onUpdate:modelValue":p=>s.name=p,placeholder:"name"},null,8,["modelValue","onUpdate:modelValue"])]),m("div",q,[T,i(u,{id:"idEmail",modelValue:s.email,"onUpdate:modelValue":p=>s.email=p,placeholder:"email"},null,8,["modelValue","onUpdate:modelValue"])]),f?(d(),y("div",O,[G,i(u,{id:"idPassword",type:"password",modelValue:s.password,"onUpdate:modelValue":p=>s.password=p,placeholder:"password"},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0)]),_:1},8,["option"]),l.showModalPermission?(d(),c(_,{key:0,show:l.showModalPermission,"onUpdate:show":o[0]||(o[0]=s=>l.showModalPermission=s),modelValue:l.DataRow,"onUpdate:modelValue":o[1]||(o[1]=s=>l.DataRow=s)},null,8,["show","modelValue"])):v("",!0)]),_:1})}var W=x(S,[["render",J]]);export{W as default};
