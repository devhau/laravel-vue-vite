import{r as l,o as f,c as N,a as s,b as i,w as c,d as K,h as M,e as C,f as g,H as $,g as b,i as Q,t as W,j as q,k as F,l as Y,m as J,n as Z,p as ee,v as te}from"./vendor.a9db33d4.js";const oe="en",V={None:"None",NoSidebar:"NoSidebar",Sidebar:"Sidebar"},A="AUTH_REQUEST",O="AUTH_SUCCESS",I="AUTH_ERROR",D="AUTH_LOGOUT",B="AUTH_CHECK";var k=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const ne={setup(){}},se={class:"vh-profile-box"},ie=s("div",{class:"vh-profile-box__item"},null,-1),ae=s("div",{class:"vh-profile-box__item"},null,-1),re=s("div",{class:"vh-profile-box__item"},null,-1),le=s("div",{class:"vh-profile-box__item"},null,-1),ce={class:"vh-profile-box__item"};function ue(e,t,o,n,a,u){const r=l("vh-button"),d=l("vh-col"),h=l("vh-row");return f(),N("div",se,[ie,ae,re,le,s("div",ce,[i(h,null,{default:c(()=>[i(d,null,{default:c(()=>[i(r,{size:"sm",text:e.$t("profile.button.logout")},null,8,["text"])]),_:1}),i(d,null,{default:c(()=>[i(r,{size:"sm",text:e.$t("profile.button.logout")},null,8,["text"])]),_:1})]),_:1})])])}var de=k(ne,[["render",ue]]);const me=K({name:"HomePage",data(){return{layout:"Sidebar",keyApp:"",menu:{app:{logo:{app:"HauAdmin",mini:"HAU"},version:{app:"Version 1.0.2",mini:"1.0.2"}},sidebar:[{className:"",icon:()=>"bi bi-box",title:()=>this.$t("menu.dashboard"),router:{name:"Home"}},{icon:"bi bi-box",title:"B\u1EA3o m\u1EADt",sub:[{className:"",icon:"bi bi-box",title:"T\xE0i kho\u1EA3n",router:{name:"User"}},{className:"",icon:"bi bi-box",title:"Vai tr\xF2",router:{name:"Role"}},{className:"",icon:"bi bi-box",title:"Quy\u1EC1n",router:{name:"Permission"}}]}],header:{left:[{className:"",icon:"bi bi-box",title:"Home",link:"https://www.hau.xyz",sub:[]},{className:"",icon:"bi bi-box",title:"Report",link:"",sub:[{className:"",icon:"bi bi-box",title:"Report 1",link:""},{className:"",icon:"bi bi-box",title:"Report 2",link:""}]},{className:"",icon:"bi bi-box",title:"Order",link:"",sub:[]},{className:"",icon:"bi bi-box",title:"Github",link:"https://github.com/devhau/vue-ui-demo",sub:[]}],right:[{className:"",icon:"bi bi-box",title:"Inbox",link:"",sub:[]},{className:"vh-profile",icon:"bi bi-box",title:()=>{var e;return(e=this.$store.state.user)==null?void 0:e.name},link:"",sub:()=>M(de,{})}]},footer:[{className:"",icon:"bi bi-box",title:"Information",link:"",sub:[]},{className:"",icon:"bi bi-box",title:"Information",link:"",sub:[]}]}}},watch:{"$route.meta.layout":{handler:function(e){this.layout=e},deep:!0,immediate:!0},"$route.meta.can":{handler:function(e){this.canPermission(e)},deep:!0,immediate:!0}},methods:{forceUpdate(){this.keyApp=`app-${new Date().getTime()}`},canPermission(e){e&&!this.$can(e)&&this.$router.push({name:"Login"})},checkPermission(){this.$nextTick(()=>{this.canPermission(this.$route.meta.can),this.forceUpdate(),this.$forceUpdate()})}},beforeMount(){this.$store.dispatch(A,this)}});function he(e,t,o,n,a,u){const r=l("router-view"),d=l("vh-application");return f(),C(d,{key:e.keyApp,menu:e.menu,miniSidebar:!1,layout:e.layout},{default:c(()=>[i(r)]),_:1},8,["menu","layout"])}var pe=k(me,[["render",he]]);const _e="http://127.0.0.1:8000/api/",x=e=>e.startsWith("http")?e:_e+e,v={"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},E={...v,"Content-Type":"multipart/form-data; boundary=something",Accept:"multipart/form-data"},ve=()=>{delete v.Authorization,delete E.Authorization},be=e=>{v.Authorization=`Bearer ${e}`,E.Authorization=`Bearer ${e}`},w={get:(e,t)=>g.default.get(x(e),{params:t,headers:v,validateStatus:o=>$(o)}),post:(e,t)=>g.default.post(x(e),t,{headers:v,validateStatus:o=>$(o)}),put:(e,t)=>g.default.put(x(e),t,{headers:v,validateStatus:o=>$(o)}),delete:(e,t)=>g.default.delete(x(e),{params:t,headers:v,validateStatus:o=>$(o)}),postMultiplePart:(e,t)=>g.default.post(x(e),t,{headers:E,validateStatus:o=>$(o)})},Bt=e=>({getAll:u=>w.get(`${e}`,u),add:u=>w.post(`${e}`,u),edit:(u,r)=>w.put(`${e}/${u}`,r),remove:u=>w.delete(`${e}/${u}`)});var _={...w,clearToken:ve,setToken:be};const H="vue_auth_token",fe=e=>_.post("auth/login",e),ge=e=>_.post("auth/register",e),$e=e=>_.post("auth/changePassword",e),j=()=>_.get("auth/user"),Ae=()=>_.get("auth/logout"),z=()=>{const e=localStorage.getItem(H);return e!=null?(_.setToken(e),!0):!1},ke=async()=>(z(),await j()),xe=e=>{_.setToken(e),localStorage.setItem(H,e)},we=e=>{e&&Ae(),_.clearToken(),localStorage.removeItem(H)};var P={login:fe,register:ge,me:j,checkAuth:z,setToken:xe,clearToken:we,changePassword:$e,getUserMe:ke};const ye={data(){return{password:"",account:""}},methods:{doLogin(){P.login({email:this.account,device_name:"web",password:this.password}).then(({data:e})=>{P.setToken(e.token),this.$store.dispatch(A,this),this.$router.push({name:"Home"})})}},setup(){}},Te={class:"vh-auth-box"},Pe=s("div",{class:"vh-auth-header"},[s("h3",null,"Login")],-1),Ue={class:"vh-auth-body"},Re={class:"mb-2"},Ce=s("label",{for:"account"},"Account",-1),Ee={class:"mb-2"},He=s("label",{for:"password"},"Password",-1),Se={class:"mb-2"},Le={class:"vh-auth-bottom"},Ne=b(" Register "),Ve=b(" Login ");function Oe(e,t,o,n,a,u){const r=l("vh-input"),d=l("vh-checkbox"),h=l("vh-button"),y=l("vh-col"),R=l("vh-row"),p=l("vh-page");return f(),C(p,{class:"vh-auth-page"},{default:c(()=>[s("div",Te,[Pe,s("div",Ue,[s("div",Re,[Ce,i(r,{modelValue:a.account,"onUpdate:modelValue":t[0]||(t[0]=T=>a.account=T),id:"account",placeholder:"Account"},null,8,["modelValue"])]),s("div",Ee,[He,i(r,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=T=>a.password=T),type:"password",id:"password",placeholder:"Password"},null,8,["modelValue"])]),s("div",Se,[i(d,{label:"Remember me"})])]),s("div",Le,[i(R,null,{default:c(()=>[i(y,null,{default:c(()=>[i(h,{color:"success",onClick:t[2]||(t[2]=T=>e.$router.push({name:"Register"}))},{default:c(()=>[Ne]),_:1})]),_:1}),i(y,null,{default:c(()=>[i(h,{onClick:u.doLogin},{default:c(()=>[Ve]),_:1},8,["onClick"])]),_:1})]),_:1})])])]),_:1})}var Ie=k(ye,[["render",Oe]]);const De={data(){return{email:"",name:"",pass:""}},methods:{doRegister(){P.register({email:this.email,name:this.name,password:this.pass}).then(()=>{this.$router.push({name:"Login"})})}},setup(){}},Be={class:"vh-auth-box"},je=s("div",{class:"vh-auth-header"},[s("h3",null,"Register")],-1),ze={class:"vh-auth-body"},Ge={class:"mb-2"},Xe=s("label",{for:"email"},"Email",-1),Ke={class:"mb-2"},Me=s("label",{for:"fullname"},"Full name",-1),Qe={class:"mb-2"},We=s("label",{for:"password"},"Password",-1),qe={class:"vh-auth-bottom"},Fe=b(" Login "),Ye=b(" Register ");function Je(e,t,o,n,a,u){const r=l("vh-input"),d=l("vh-button"),h=l("vh-col"),y=l("vh-row"),R=l("vh-page");return f(),C(R,{class:"vh-auth-page"},{default:c(()=>[s("div",Be,[je,s("div",ze,[s("div",Ge,[Xe,i(r,{modelValue:a.email,"onUpdate:modelValue":t[0]||(t[0]=p=>a.email=p),id:"email",placeholder:"Email"},null,8,["modelValue"])]),s("div",Ke,[Me,i(r,{modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=p=>a.name=p),id:"fullname",placeholder:"Full name"},null,8,["modelValue"])]),s("div",Qe,[We,i(r,{modelValue:a.pass,"onUpdate:modelValue":t[2]||(t[2]=p=>a.pass=p),type:"password",id:"password",placeholder:"Password"},null,8,["modelValue"])])]),s("div",qe,[i(y,null,{default:c(()=>[i(h,null,{default:c(()=>[i(d,{onClick:t[3]||(t[3]=p=>e.$router.push({name:"Login"}))},{default:c(()=>[Fe]),_:1})]),_:1}),i(h,null,{default:c(()=>[i(d,{color:"success",onClick:u.doRegister},{default:c(()=>[Ye]),_:1},8,["onClick"])]),_:1})]),_:1})])])]),_:1})}var Ze=k(De,[["render",Je]]),et=[{path:"/login",name:"Login",component:Ie,meta:{layout:V.None}},{path:"/register",name:"Register",component:Ze,meta:{layout:V.None}}];const tt="modulepreload",G={},ot="/dist/",S=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${ot}${n}`,n in G)return;G[n]=!0;const a=n.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${u}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":tt,a||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),a)return new Promise((d,h)=>{r.addEventListener("load",d),r.addEventListener("error",h)})})).then(()=>t())};var nt={index:"home.index"},st={index:"permission.index"},it={index:"permission.index"},at={index:"role.index"},U={home:nt,role:at,user:it,permission:st},rt=[{path:"/user",name:"User",meta:{can:U.user.index},component:()=>S(()=>import("./index.a0d62f27.js"),["assets/index.a0d62f27.js","assets/index.1d074a31.js","assets/vendor.a9db33d4.js"])},{path:"/role",name:"Role",meta:{can:U.role.index},component:()=>S(()=>import("./index.d7875996.js"),["assets/index.d7875996.js","assets/index.1d074a31.js","assets/vendor.a9db33d4.js"])},{path:"/permission",name:"Permission",meta:{can:U.permission.index},component:()=>S(()=>import("./index.b9c8d2d4.js"),["assets/index.b9c8d2d4.js","assets/index.1d074a31.js","assets/vendor.a9db33d4.js"])}];const lt={},ct=b("Ch\xE0o m\u1ECDi ng\u01B0\u1EDDi");function ut(e,t){const o=l("vh-button"),n=Q("can");return f(),N("div",null,[b(W(e.$can("home.indexfff"))+" ",1),q(i(o,null,{default:c(()=>[ct]),_:1},512),[[n,"home.index"]])])}var dt=k(lt,[["render",ut]]),mt=[{path:"/",name:"Home",meta:{can:U.home.index},component:dt},...et,...rt],ht={hello:"hello",manager:{button:{new:"New",edit:"Edit",remove:"Remove",delete:"Delete",cancel:"Cancel",active:"Active",view:"View",detail:"Detail",update:"Update"}}},pt={dashboard:"B\u1EA3ng \u0111i\u1EC1u khi\u1EC3n"},_t={},vt={button:{logout:"Logout"}},bt={common:ht,module:_t,menu:pt,profile:vt},ft={},gt={common:ft},$t={hello:"Xin ch\xE0o",manager:{title:{new:"Th\xEAm m\u1EDBi",edit:"Ch\u1EC9nh s\u1EEDa",action:"H\xE0nh \u0111\u1ED9ng",confirmDelete:"B\u1EA1n c\xF3 mu\u1ED1n x\xF3a b\u1EA3ng ghi n\xE0y kh\xF4ng?",remove:"X\xF3a d\u1EEF li\u1EC7u"},button:{new:"Th\xEAm m\u1EDBi",edit:"Ch\u1EC9nh s\u1EEDa",remove:"X\xF3a b\u1ECF",delete:"X\xF3a",cancel:"H\u1EE7y b\u1ECF",active:"K\xEDch ho\u1EA1ch",view:"Hi\u1EC3n th\u1ECB",detail:"Chi ti\u1EBFt",update:"C\u1EADp nh\u1EADt"},table:{empty:"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u!"}}},At={dashboard:"B\u1EA3ng \u0111i\u1EC1u khi\u1EC3n"},kt={title:"Vai tr\xF2",button:{permission:"Ph\xE2n quy\u1EC1n"}},xt={title:"Quy\u1EC1n"},wt={title:"T\xE0i kho\u1EA3n"},yt={permission:xt,role:kt,user:wt},Tt={button:{logout:"Logout"}},Pt={common:$t,module:yt,menu:At,profile:Tt},Ut={en:bt,jp:gt,vi:Pt},Rt={},Ct={},Et={};const Ht=async()=>({loggin:void 0,user:{},permissions:[],status:"",isAdmin:!1});var St={state:Ht(),actions:{[A]:({commit:e,dispatch:t},o)=>{e(A),P.getUserMe().then(n=>{var a;n.status!=401&&(n==null?void 0:n.data)?e(O,(a=n==null?void 0:n.data)==null?void 0:a.data):(e(I),e(D)),t(B,o)})},[B]:({commit:e,dispatch:t},o)=>{o&&o.checkPermission&&o.checkPermission()}},getters:{isAuthenticated:e=>(t=!0)=>t&&e.status=="loading"||e.loggin,canPermission:e=>(t,o=!0)=>e.status=="loading"&&o?!0:!(!e.loggin||!e.isAdmin&&!e.permissions.includes(t))},mutations:{[A]:e=>{e.status="loading"},[O]:(e,t)=>{e.status="done",e.loggin=!0,e.user=t.user,e.isAdmin=t.isAdmin,e.permissions=t.permissions},[I]:e=>{e.status="error",e.loggin=!1},[D]:e=>{e.status="",e.loggin=void 0}}},Lt={auth:St},Nt={state:Ct,mutations:Et,getters:Rt,modules:Lt},Vt=e=>{e.directive("can",{mounted(t,o,n){t.style.visibility=e.config.globalProperties.$can(o.value,!1)?"":"hidden"}})},Ot=e=>{e.use(Vt)};const It=F({locale:"vi",fallbackLocale:oe,messages:Ut}),L=Y(Nt),X=J({history:Z(),routes:mt}),m=ee(pe);X.beforeEach((e,t,o)=>{var n;return((n=e==null?void 0:e.meta)==null?void 0:n.can)&&!m.config.globalProperties.$can(e.meta.can)?o({name:"Login"}):m.config.globalProperties.$isAuth()&&e.path==="/login"?o("/"):o()});m.config.globalProperties.$can=(e,t=!0)=>L.getters.canPermission(e,t);m.config.globalProperties.$isAuth=(e=!0)=>L.getters.isAuthenticated(e);m.use(te);m.use(X);m.use(L);m.use(It);m.use(Ot);m.mount("#app");export{k as _,_ as a,Bt as b};
