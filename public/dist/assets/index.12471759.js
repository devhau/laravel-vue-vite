import{M as x}from"./index.8f83d433.js";import{b as D,a as P,_ as C}from"./main.09aa98f8.js";import{r as l,o as c,e as h,w as a,b as d,g,t as _,s as v,a as i}from"./vendor.b9ae47ca.js";const y=D("role"),M=(e,o)=>P.get(`role/permission/${e}/${o}`),B=(e,o)=>P.put(`role/permission/${e}`,o);var w={...y,getPermission:M,putPermission:B};const N={props:{show:{type:Boolean,default:!1},modelValue:{}},methods:{onCloseForm(){this.$emit("update:show",!1)},onUpdateData(){var e;w.putPermission((e=this.modelValue)==null?void 0:e.id,{permissions:this.permissions}).then(()=>{this.onCloseForm()})}},computed:{source(){return Object.keys(this.modules).map(e=>{let o=this.modules[e].map(t=>({text:t.title,value:t.name}));return{text:e,sub:o}})}},data(){return{modules:null,permissions:[]}},mounted(){var e;w.getPermission((e=this.modelValue)==null?void 0:e.id,"web").then(({data:o})=>{let{modules:t,permissions:f}=o.data;this.modules=t,this.permissions=f})},setup(){}};function $(e,o,t,f,n,m){const b=l("vh-group-checkbox"),r=l("vh-button"),V=l("vh-modal");return c(),h(V,{title:this.modelValue.name,show:t.show,onHide:m.onCloseForm},{footer:a(({})=>[d(r,{size:"sm",color:"warning",beforeIcon:"bi bi-x",onClick:m.onCloseForm},{default:a(()=>[g(_(e.$t("common.manager.button.cancel")),1)]),_:1},8,["onClick"]),d(r,{size:"sm",beforeIcon:"bi bi-pencil-square",onClick:o[1]||(o[1]=u=>m.onUpdateData())},{default:a(()=>[g(_(e.$t("common.manager.button.update")),1)]),_:1})]),default:a(()=>[n.modules?(c(),h(b,{key:0,style:{"max-height":"500px"},modelValue:n.permissions,"onUpdate:modelValue":o[0]||(o[0]=u=>n.permissions=u),source:m.source,itemDisabled:u=>this.modelValue.name==="supper-admin"},null,8,["modelValue","source","itemDisabled"])):v("",!0)]),_:1},8,["title","show","onHide"])}var F=C(N,[["render",$]]);const j={components:{Manager:x,Permission:F},methods:{SetPermission(e){this.DataRow=e,this.showModalPermission=!0}},data(){return{showModalPermission:!1,DataRow:{},option:{checkButtonDelete:({row:e,index:o,start:t})=>e.name!="supper-admin",checkButtonUpdate:({row:e,index:o,start:t})=>e.name!="supper-admin",api:{...w},columns:[{title:"#",isSort:!1,isFilter:!1,dataCell:(e,o,t)=>o+t},{title:"name",field:"name"},{title:"title",field:"title"},{title:"guard",field:"guard_name"}]}}},setup(){}},R={class:"mb-3"},S=i("label",{for:"idName",class:"form-label"},"M\xE3 vai tr\xF2",-1),z={class:"mb-3"},I=i("label",{for:"idtitle",class:"form-label"},"T\xEAn quy\u1EC1n",-1),T={class:"mb-3"},q=i("label",{for:"idguard_name",class:"form-label"},"T\xEAn guard",-1);function A(e,o,t,f,n,m){const b=l("vh-button"),r=l("vh-input"),V=l("manager"),u=l("Permission"),U=l("vh-page");return c(),h(U,null,{default:a(()=>[i("h3",null,_(e.$t("module.role.title")),1),d(V,{option:n.option},{action_after:a(({row:s})=>[s.name!="supper-admin"?(c(),h(b,{key:0,beforeIcon:"bi bi-shield",color:"warning",size:"sm",onClick:k=>m.SetPermission(s)},{default:a(()=>[g(_(e.$t("module.role.button.permission")),1)]),_:2},1032,["onClick"])):v("",!0)]),form_update:a(({data:s,isNew:k})=>[i("div",R,[S,d(r,{id:"idName",disabled:!k,modelValue:s.name,"onUpdate:modelValue":p=>s.name=p,placeholder:"name"},null,8,["disabled","modelValue","onUpdate:modelValue"])]),i("div",z,[I,d(r,{id:"idtitle",modelValue:s.title,"onUpdate:modelValue":p=>s.title=p,placeholder:"title"},null,8,["modelValue","onUpdate:modelValue"])]),i("div",T,[q,d(r,{id:"idguard_name",modelValue:s.guard_name,"onUpdate:modelValue":p=>s.guard_name=p,placeholder:"guard_name"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["option"]),n.showModalPermission?(c(),h(u,{key:0,show:n.showModalPermission,"onUpdate:show":o[0]||(o[0]=s=>n.showModalPermission=s),modelValue:n.DataRow,"onUpdate:modelValue":o[1]||(o[1]=s=>n.DataRow=s)},null,8,["show","modelValue"])):v("",!0)]),_:1})}var G=C(j,[["render",A]]);export{G as default};
