import{r as c,o as b,c as V,a as n,b as r,w as u,d as q,h as F,e as E,f as g,t as O,g as f,H as $,i as K,j as Q,k as Y,l as J,m as Z,n as ee}from"./vendor.2231596e.js";const te="en",I={None:"None",NoSidebar:"NoSidebar",Sidebar:"Sidebar"},T="AUTH_REQUEST",B="AUTH_SUCCESS",D="AUTH_ERROR",j="AUTH_LOGOUT";var A=(e,t)=>{for(const[o,a]of t)e[o]=a;return e};const oe={setup(){}},ne={class:"vh-profile-box"},se=n("div",{class:"vh-profile-box__item"},null,-1),ae=n("div",{class:"vh-profile-box__item"},null,-1),ie=n("div",{class:"vh-profile-box__item"},null,-1),re=n("div",{class:"vh-profile-box__item"},null,-1),le={class:"vh-profile-box__item"};function ce(e,t,o,a,i,l){const s=c("vh-button"),d=c("vh-col"),h=c("vh-row");return b(),V("div",ne,[se,ae,ie,re,n("div",le,[r(h,null,{default:u(()=>[r(d,null,{default:u(()=>[r(s,{size:"sm",text:e.$t("profile.button.logout")},null,8,["text"])]),_:1}),r(d,null,{default:u(()=>[r(s,{size:"sm",text:e.$t("profile.button.logout")},null,8,["text"])]),_:1})]),_:1})])])}var ue=A(oe,[["render",ce]]);const de=q({name:"HomePage",data(){return{layout:"Sidebar",menu:{app:{logo:{app:"HauAdmin",mini:"HAU"},version:{app:"Version 1.0.2",mini:"1.0.2"}},sidebar:[{className:"",icon:()=>"bi bi-box",title:()=>this.$t("menu.dashboard"),router:{name:"Home"}},{icon:"bi bi-box",title:"B\u1EA3o m\u1EADt",sub:[{className:"",icon:"bi bi-box",title:"T\xE0i kho\u1EA3n",router:{name:"User"}},{className:"",icon:"bi bi-box",title:"Vai tr\xF2",router:{name:"Role"}},{className:"",icon:"bi bi-box",title:"Quy\u1EC1n",router:{name:"Permission"}}]}],header:{left:[{className:"",icon:"bi bi-box",title:"Home",link:"https://www.hau.xyz",sub:[]},{className:"",icon:"bi bi-box",title:"Report",link:"",sub:[{className:"",icon:"bi bi-box",title:"Report 1",link:""},{className:"",icon:"bi bi-box",title:"Report 2",link:""}]},{className:"",icon:"bi bi-box",title:"Order",link:"",sub:[]},{className:"",icon:"bi bi-box",title:"Github",link:"https://github.com/devhau/vue-ui-demo",sub:[]}],right:[{className:"",icon:"bi bi-box",title:"Inbox",link:"",sub:[]},{className:"vh-profile",icon:"bi bi-box",title:()=>{var e;return(e=this.$store.state.user)==null?void 0:e.name},link:"",sub:()=>F(ue,{})}]},footer:[{className:"",icon:"bi bi-box",title:"Information",link:"",sub:[]},{className:"",icon:"bi bi-box",title:"Information",link:"",sub:[]}]}}},watch:{"$route.meta.layout":{handler:function(e){this.layout=e},deep:!0,immediate:!0}},created:()=>{},beforeMount(){this.$store.getters.isAuthenticated&&this.$store.dispatch(T)},mounted(){}});function he(e,t,o,a,i,l){const s=c("router-view"),d=c("vh-application");return b(),E(d,{menu:e.menu,miniSidebar:!1,layout:e.layout},{default:u(()=>[r(s),g(" "+O(this.$store.state.auth.loggin),1)]),_:1},8,["menu","layout"])}var me=A(de,[["render",he]]);const _e="http://127.0.0.1:8000/api/",k=e=>e.startsWith("http")?e:_e+e,v={"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},L={...v,"Content-Type":"multipart/form-data; boundary=something",Accept:"multipart/form-data"},pe=()=>{delete v.Authorization,delete L.Authorization},ve=e=>{v.Authorization=`Bearer ${e}`,L.Authorization=`Bearer ${e}`},w={get:(e,t)=>f.default.get(k(e),{params:t,headers:v,validateStatus:o=>$(o)}),post:(e,t)=>f.default.post(k(e),t,{headers:v,validateStatus:o=>$(o)}),put:(e,t)=>f.default.put(k(e),t,{headers:v,validateStatus:o=>$(o)}),delete:(e,t)=>f.default.delete(k(e),{params:t,headers:v,validateStatus:o=>$(o)}),postMultiplePart:(e,t)=>f.default.post(k(e),t,{headers:L,validateStatus:o=>$(o)})},Lt=e=>({getAll:l=>w.get(`${e}`,l),add:l=>w.post(`${e}`,l),edit:(l,s)=>w.put(`${e}/${l}`,s),remove:l=>w.delete(`${e}/${l}`)});var _={...w,clearToken:pe,setToken:ve};const C="vue_auth_token",be=e=>_.post("auth/login",e),ge=e=>_.post("auth/register",e),fe=e=>_.post("auth/changePassword",e),z=()=>_.get("auth/user"),$e=()=>_.get("auth/logout");let U=[],G=!1;const Ae=e=>G||(U==null?void 0:U.includes(e)),H=e=>U=e!=null?e:[],X=()=>{const e=localStorage.getItem(C);return e!=null?(_.setToken(e),!0):!1},ke=async()=>{var e;if(!X()){N();return}try{let t=await z(),{permissions:o,isAdmin:a}=(e=t==null?void 0:t.data)==null?void 0:e.data;return H(o),G=a,t}catch(t){N(!0);return}},we=e=>{_.setToken(e),localStorage.setItem(C,e)},N=e=>{e&&$e(),H([]),_.clearToken(),localStorage.removeItem(C)};var p={login:be,register:ge,me:z,checkAuth:X,setToken:we,clearToken:N,changePassword:fe,$can:Ae,setPermission:H,getUserMe:ke};const xe={data(){return{password:"",account:""}},methods:{doLogin(){p.login({email:this.account,device_name:"web",password:this.password}).then(({data:e})=>{p.setToken(e.token),this.$router.push({name:"Home"})})}},setup(){}},ye={class:"vh-auth-box"},Re=n("div",{class:"vh-auth-header"},[n("h3",null,"Login")],-1),Te={class:"vh-auth-body"},Ue={class:"mb-2"},Se=n("label",{for:"account"},"Account",-1),Ee={class:"mb-2"},Le=n("label",{for:"password"},"Password",-1),Ce={class:"mb-2"},He={class:"vh-auth-bottom"},Ne=g(" Register "),Pe=g(" Login ");function Ve(e,t,o,a,i,l){const s=c("vh-input"),d=c("vh-checkbox"),h=c("vh-button"),y=c("vh-col"),S=c("vh-row"),m=c("vh-page");return b(),E(m,{class:"vh-auth-page"},{default:u(()=>[n("div",ye,[Re,n("div",Te,[n("div",Ue,[Se,r(s,{modelValue:i.account,"onUpdate:modelValue":t[0]||(t[0]=R=>i.account=R),id:"account",placeholder:"Account"},null,8,["modelValue"])]),n("div",Ee,[Le,r(s,{modelValue:i.password,"onUpdate:modelValue":t[1]||(t[1]=R=>i.password=R),type:"password",id:"password",placeholder:"Password"},null,8,["modelValue"])]),n("div",Ce,[r(d,{label:"Remember me"})])]),n("div",He,[r(S,null,{default:u(()=>[r(y,null,{default:u(()=>[r(h,{color:"success",onClick:t[2]||(t[2]=R=>e.$router.push({name:"Register"}))},{default:u(()=>[Ne]),_:1})]),_:1}),r(y,null,{default:u(()=>[r(h,{onClick:l.doLogin},{default:u(()=>[Pe]),_:1},8,["onClick"])]),_:1})]),_:1})])])]),_:1})}var Oe=A(xe,[["render",Ve]]);const Ie={data(){return{email:"",name:"",pass:""}},methods:{doRegister(){p.register({email:this.email,name:this.name,password:this.pass}).then(()=>{this.$router.push({name:"Login"})})}},setup(){}},Be={class:"vh-auth-box"},De=n("div",{class:"vh-auth-header"},[n("h3",null,"Register")],-1),je={class:"vh-auth-body"},ze={class:"mb-2"},Ge=n("label",{for:"email"},"Email",-1),Xe={class:"mb-2"},Me=n("label",{for:"fullname"},"Full name",-1),We={class:"mb-2"},qe=n("label",{for:"password"},"Password",-1),Fe={class:"vh-auth-bottom"},Ke=g(" Login "),Qe=g(" Register ");function Ye(e,t,o,a,i,l){const s=c("vh-input"),d=c("vh-button"),h=c("vh-col"),y=c("vh-row"),S=c("vh-page");return b(),E(S,{class:"vh-auth-page"},{default:u(()=>[n("div",Be,[De,n("div",je,[n("div",ze,[Ge,r(s,{modelValue:i.email,"onUpdate:modelValue":t[0]||(t[0]=m=>i.email=m),id:"email",placeholder:"Email"},null,8,["modelValue"])]),n("div",Xe,[Me,r(s,{modelValue:i.name,"onUpdate:modelValue":t[1]||(t[1]=m=>i.name=m),id:"fullname",placeholder:"Full name"},null,8,["modelValue"])]),n("div",We,[qe,r(s,{modelValue:i.pass,"onUpdate:modelValue":t[2]||(t[2]=m=>i.pass=m),type:"password",id:"password",placeholder:"Password"},null,8,["modelValue"])])]),n("div",Fe,[r(y,null,{default:u(()=>[r(h,null,{default:u(()=>[r(d,{onClick:t[3]||(t[3]=m=>e.$router.push({name:"Login"}))},{default:u(()=>[Ke]),_:1})]),_:1}),r(h,null,{default:u(()=>[r(d,{color:"success",onClick:l.doRegister},{default:u(()=>[Qe]),_:1},8,["onClick"])]),_:1})]),_:1})])])]),_:1})}var Je=A(Ie,[["render",Ye]]),Ze=[{path:"/login",name:"Login",component:Oe,meta:{layout:I.None}},{path:"/register",name:"Register",component:Je,meta:{layout:I.None}}];const et="modulepreload",M={},tt="/dist/",P=function(t,o){return!o||o.length===0?t():Promise.all(o.map(a=>{if(a=`${tt}${a}`,a in M)return;M[a]=!0;const i=a.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":et,i||(s.as="script",s.crossOrigin=""),s.href=a,document.head.appendChild(s),i)return new Promise((d,h)=>{s.addEventListener("load",d),s.addEventListener("error",h)})})).then(()=>t())};var ot=[{path:"/user",name:"User",component:()=>P(()=>import("./index.68f18940.js"),["assets/index.68f18940.js","assets/index.56c0fb8c.js","assets/vendor.2231596e.js"])},{path:"/role",name:"Role",component:()=>P(()=>import("./index.ed3c59b8.js"),["assets/index.ed3c59b8.js","assets/index.56c0fb8c.js","assets/vendor.2231596e.js"])},{path:"/permission",name:"Permission",component:()=>P(()=>import("./index.8ea86dde.js"),["assets/index.8ea86dde.js","assets/index.56c0fb8c.js","assets/vendor.2231596e.js"])}];const nt={};function st(e,t){return b(),V("div",null,O(e.$t("common.hello")),1)}var at=A(nt,[["render",st]]),it=[{path:"/",name:"Home",component:at},...Ze,...ot];const rt=["/login","/register"],W=K({history:Q(),routes:it});W.beforeEach((e,t,o)=>{var l,s,d;const a=!rt.includes(e.path),i=p.checkAuth();return(((l=e.meta)==null?void 0:l.can)||a)&&!i?o({name:"Login"}):((s=e.meta)==null?void 0:s.can)&&!p.$can((d=e.meta)==null?void 0:d.can)?o({name:"Login"}):i&&e.path==="/login"?o("/"):o()});var lt={hello:"hello",manager:{button:{new:"New",edit:"Edit",remove:"Remove",delete:"Delete",cancel:"Cancel",active:"Active",view:"View",detail:"Detail",update:"Update"}}},ct={dashboard:"B\u1EA3ng \u0111i\u1EC1u khi\u1EC3n"},ut={},dt={button:{logout:"Logout"}},ht={common:lt,module:ut,menu:ct,profile:dt},mt={},_t={common:mt},pt={hello:"Xin ch\xE0o",manager:{title:{new:"Th\xEAm m\u1EDBi",edit:"Ch\u1EC9nh s\u1EEDa",action:"H\xE0nh \u0111\u1ED9ng",confirmDelete:"B\u1EA1n c\xF3 mu\u1ED1n x\xF3a b\u1EA3ng ghi n\xE0y kh\xF4ng?",remove:"X\xF3a d\u1EEF li\u1EC7u"},button:{new:"Th\xEAm m\u1EDBi",edit:"Ch\u1EC9nh s\u1EEDa",remove:"X\xF3a b\u1ECF",delete:"X\xF3a",cancel:"H\u1EE7y b\u1ECF",active:"K\xEDch ho\u1EA1ch",view:"Hi\u1EC3n th\u1ECB",detail:"Chi ti\u1EBFt",update:"C\u1EADp nh\u1EADt"},table:{empty:"Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u!"}}},vt={dashboard:"B\u1EA3ng \u0111i\u1EC1u khi\u1EC3n"},bt={},gt={button:{logout:"Logout"}},ft={common:pt,module:bt,menu:vt,profile:gt},$t={en:ht,jp:_t,vi:ft},At={},kt={},wt={};const xt=async()=>({loggin:p.checkAuth(),user:{},status:""});var yt={state:xt(),actions:{[T]:({commit:e,dispatch:t},o)=>{e(T),p.getUserMe().then(({data:a})=>{a&&a.OK?e(B,a.data):(e(D),e(j))})}},getters:{isAuthenticated:()=>p.checkAuth()},mutations:{[T]:e=>{e.status="loading"},[B]:(e,t)=>{console.log(t),e.status="done",e.loggin=!0,e.user=t.user},[D]:e=>{e.status="error",e.loggin=!1},[j]:e=>{e.status="",e.loggin=!1}}},Rt={auth:yt},Tt={state:kt,mutations:wt,getters:At,modules:Rt};const Ut=Y({locale:"vi",fallbackLocale:te,messages:$t}),St=J(Tt),x=Z(me);x.use(ee);x.use(W);x.use(St);x.use(Ut);x.mount("#app");export{A as _,_ as a,Lt as b};
